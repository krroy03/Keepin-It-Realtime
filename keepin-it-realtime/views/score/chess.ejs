<script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.4/underscore-min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.0.0/backbone-min.js"></script>
<script type="text/javascript">
<!--
var unityObjectUrl = "/UnityObject2.js";
if (document.location.protocol == 'https:')
  unityObjectUrl = unityObjectUrl.replace("http://", "https://ssl-");
document.write('<script type="text\/javascript" src="' + unityObjectUrl + '"><\/script>');
-->
</script>
<script type="text/javascript">
<!--
  var config = {
    width: 960,
    height: 600,
    params: { enableDebugging:"0" }

  };
  var u = new UnityObject2(config);

  jQuery(function() {

    var $missingScreen = jQuery("#unityPlayer").find(".missing");
    var $brokenScreen = jQuery("#unityPlayer").find(".broken");
    $missingScreen.hide();
    $brokenScreen.hide();

    u.observeProgress(function (progress) {
      switch(progress.pluginStatus) {
        case "broken":
          $brokenScreen.find("a").click(function (e) {
            e.stopPropagation();
            e.preventDefault();
            u.installPlugin();
            return false;
          });
          $brokenScreen.show();
        break;
        case "missing":
          $missingScreen.find("a").click(function (e) {
            e.stopPropagation();
            e.preventDefault();
            u.installPlugin();
            return false;
          });
          $missingScreen.show();
        break;
        case "installed":
          $missingScreen.remove();
        break;
        case "first":
        break;
      }
    });
    u.initPlugin(jQuery("#unityPlayer")[0], "/Chess.unity3d");
  });
-->
</script>
<script>
  $(function(){
    var game = $("<iframe src='/templates/Chess.html'>");

    $("#unityGame").append(game);
    //load("/templates/Chess.html");
  });
</script>
<div id="scoreboard" class="container">
<h1>Scoreboard</h1>
<% scores.forEach(function(score)  { %>
  <div class="bar">
    <h4><%= score.username %></h4>
    <p><%= score.score %> </p>
  </div>
<% }); %>
</div>

<div id="game" class="container row">
  <div class="content">
    <div id="unityPlayer">
      <div class="missing">
        <a href="http://unity3d.com/webplayer/" title="Unity Web Player. Install now!">
          <img alt="Unity Web Player. Install now!" src="http://webplayer.unity3d.com/installation/getunity.png" width="193" height="63" />
        </a>
      </div>
      <div class="broken">
        <a href="http://unity3d.com/webplayer/" title="Unity Web Player. Install now! Restart your browser after install.">
          <img alt="Unity Web Player. Install now! Restart your browser after install." src="http://webplayer.unity3d.com/installation/getunityrestart.png" width="193" height="63" />
        </a>
      </div>
    </div>
  </div>
  <p class="footer">&laquo; created with <a href="http://unity3d.com/unity/" title="Go to unity3d.com">Unity</a> &raquo;</p>
</div>

<center>
<div id="main">
  <div>
      My name: <input type="text" id="my-name"> <button id="update-name">Update</button>
  </div>
  <h1>Users online</h1>
  <div>
      <select id="users-list" size="9"></select>
      <!-- button id="private-msg-button">Send private message to selected user</button -->
      <div id="convos"></div>
  </div>
  <h1>Chat rooms</h1>
  <div>
      <select id="rooms-list" size="5"></select>
      <button id="join-room">Join selected room</button>
      <button id="new-room">Start a new room</button>
      <div id="rooms"></div>
  </div>
</div>
<div id="disconnect" style="display:none">Waiting for reconnect...</div>
</center>