module.exports={create_or_update:function(e,r){var o=e.param("UserID"),n=e.param("Score");return o?n?void(o&&n&&User.findOne(o,function s(c,i){if(c)return console.log(c),e.session.flash={err:c},r.redirect("/");var t={user:i,username:i.username,score:n};Score.findOne().where({user_id:o}).exec(function(o,s){s?(s.score=n,s.save(function(e){e||r.redirect("/")})):Score.create(t,function c(o,n){return o?(console.log(o),e.session.flash={err:o},r.redirect("/")):(console.log("Score created"),console.log(n),void r.redirect("/"))})})})):(console.log(new Error("No score was entered.")),e.session.flash={err:new Error("No score was entered.")},r.redirect("/")):(console.log(new Error("No username was entered.")),e.session.flash={err:new Error("No username was entered.")},r.redirect("/"))},showAll:function(e,r){var o=Math.floor(999999*Math.random())+1,n="rando"+String(o);Score.find(function s(o,c){o?(console.log(o),r.redirect("/")):e.session.user?User.findOne(e.session.user).then(function(e){return r.view({scores:c,username:e.username})}):r.view({scores:c,username:n})})}};